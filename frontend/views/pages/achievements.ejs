<%- include('../partials/header', { pageTitle: 'Achievements' }) %>
<main class="p-4 lg:p-6"><div class="max-w-7xl mx-auto space-y-6">
<div><h1 class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Achievements</h1><p class="<%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Track your investing milestones</p></div>

<!-- Stats -->
<div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
<div class="card p-5"><p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm mb-1">Unlocked</p><p class="text-2xl font-bold text-green-400"><%= achievements.filter(a => a.earned_at).length %> / <%= achievements.length %></p></div>
<div class="card p-5"><p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm mb-1">Total XP</p><p class="text-2xl font-bold text-purple-400"><%= achievements.filter(a => a.earned_at).reduce((s, a) => s + (a.points || 0), 0) %></p></div>
<div class="card p-5"><p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm mb-1">Rank</p><p class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Intermediate</p></div>
<div class="card p-5"><p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm mb-1">Next Level</p><div class="flex items-center gap-2"><div class="flex-1 h-2 <%= theme === 'light' ? 'bg-gray-200' : 'bg-slate-700' %> rounded-full"><div class="h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full" style="width: 65%"></div></div><span class="<%= theme === 'light' ? 'text-gray-900' : 'text-white' %> text-sm font-medium">65%</span></div></div>
</div>

<!-- Achievement Categories -->
<div class="card p-5"><h3 class="text-lg font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">All Achievements</h3>
<% const allAchievements = achievements.length > 0 ? achievements : [{name:'First Steps',desc:'Create your first portfolio',icon:'ðŸš€',points:100,earned_at:'2024-01-15'},{name:'Diversified',desc:'Hold 10+ different stocks',icon:'ðŸŽ¯',points:200,earned_at:'2024-02-20'},{name:'Income Investor',desc:'Receive $100 in dividends',icon:'ðŸ’°',points:150,earned_at:'2024-03-10'},{name:'Tax Saver',desc:'Harvest $1,000 in losses',icon:'ðŸ“Š',points:250,earned_at:null},{name:'Goal Setter',desc:'Create 3 financial goals',icon:'ðŸŽ¯',points:100,earned_at:'2024-04-05'},{name:'Watchful Eye',desc:'Add 5 stocks to watchlist',icon:'ðŸ‘ï¸',points:75,earned_at:'2024-05-12'},{name:'Risk Manager',desc:'Achieve health score of 80+',icon:'ðŸ›¡ï¸',points:300,earned_at:null},{name:'Benchmark Beater',desc:'Outperform S&P 500',icon:'ðŸ†',points:500,earned_at:null},{name:'Diamond Hands',desc:'Hold a position for 1 year',icon:'ðŸ’Ž',points:200,earned_at:'2024-06-01'},{name:'Six Figure Club',desc:'Reach $100,000 portfolio value',icon:'ðŸŽ‰',points:1000,earned_at:null},{name:'Yield Hunter',desc:'Achieve 4%+ dividend yield',icon:'ðŸŽ£',points:250,earned_at:null},{name:'Perfect Balance',desc:'No rebalancing needed',icon:'âš–ï¸',points:150,earned_at:'2024-07-20'}]; %>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"><% allAchievements.forEach(a => { %>
<div class="p-4 rounded-xl border-2 <%= a.earned_at ? 'border-green-500/50 bg-green-500/5' : (theme === 'light' ? 'border-gray-200 bg-gray-50 opacity-60' : 'border-slate-700 bg-slate-800/30 opacity-60') %>"><div class="flex items-start gap-3"><span class="text-3xl <%= !a.earned_at ? 'grayscale' : '' %>"><%= a.icon %></span><div class="flex-1"><div class="flex items-center justify-between"><h4 class="font-semibold <%= a.earned_at ? (theme === 'light' ? 'text-gray-900' : 'text-white') : (theme === 'light' ? 'text-gray-500' : 'text-slate-500') %>"><%= a.name %></h4><span class="text-green-400 text-sm font-medium">+<%= a.points %> XP</span></div><p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm mt-1"><%= a.desc %></p><% if (a.earned_at) { %><p class="text-emerald-400 text-xs mt-2 flex items-center gap-1"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>Earned <%= fmt.date(a.earned_at) %></p><% } else { %><div class="mt-2"><div class="h-1.5 <%= theme === 'light' ? 'bg-gray-200' : 'bg-slate-700' %> rounded-full"><div class="h-full bg-slate-500 rounded-full" style="width: <%= Math.floor(Math.random() * 80) %>%"></div></div></div><% } %></div></div></div>
<% }) %></div>
</div>

<!-- Recent Activity -->
<div class="card p-5"><h3 class="text-lg font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Recent Unlocks</h3><div class="space-y-3"><% allAchievements.filter(a => a.earned_at).slice(0, 5).forEach(a => { %><div class="flex items-center justify-between p-3 <%= theme === 'light' ? 'bg-gray-100' : 'bg-slate-800/50' %> rounded-xl"><div class="flex items-center gap-3"><span class="text-2xl"><%= a.icon %></span><div><p class="<%= theme === 'light' ? 'text-gray-900' : 'text-white' %> font-medium"><%= a.name %></p><p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm"><%= fmt.date(a.earned_at) %></p></div></div><span class="text-green-400 font-bold">+<%= a.points %></span></div><% }) %></div></div>
</div></div></main>
<%- include('../partials/footer') %>
