<%- include('../partials/header', { pageTitle: 'News Sentiment' }) %>

<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
<div><h1 class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">News Sentiment</h1><p class="<%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">AI-powered news analysis & sentiment scoring</p></div>
<div class="flex gap-2">
<select class="form-input w-32"><option selected>My Holdings</option><option>Watchlist</option><option>Market News</option></select>
<select class="form-input w-28"><option selected>Today</option><option>This Week</option><option>This Month</option></select>
</div>
</div>

<!-- Sentiment Overview -->
<div class="card p-5 bg-gradient-to-r <%= theme === 'light' ? 'from-emerald-50 to-sky-50' : 'from-emerald-900/20 to-sky-900/20' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Portfolio News Sentiment</h3>
<div class="grid grid-cols-2 md:grid-cols-5 gap-4">
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Overall Sentiment</p>
<p class="text-3xl font-bold text-emerald-400">BULLISH</p>
<p class="text-xs text-emerald-400">Score: 72/100</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Articles Today</p>
<p class="text-3xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">248</p>
<p class="text-xs">across holdings</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Positive</p>
<p class="text-3xl font-bold text-emerald-400">142</p>
<p class="text-xs text-emerald-400">57%</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Neutral</p>
<p class="text-3xl font-bold text-amber-400">78</p>
<p class="text-xs">31%</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Negative</p>
<p class="text-3xl font-bold text-red-400">28</p>
<p class="text-xs text-red-400">11%</p>
</div>
</div>
</div>

<!-- Sentiment by Holding -->
<div class="card overflow-hidden">
<div class="p-4 border-b <%= theme === 'light' ? 'border-gray-200' : 'border-slate-700' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Sentiment by Holding</h3>
</div>
<table class="w-full text-sm">
<thead>
<tr class="<%= theme === 'light' ? 'bg-gray-50 text-gray-500' : 'bg-slate-800 text-slate-400' %> text-left">
<th class="px-4 py-3">Stock</th>
<th class="px-4 py-3 text-center">Sentiment</th>
<th class="px-4 py-3 text-center">Score</th>
<th class="px-4 py-3 text-center">Articles</th>
<th class="px-4 py-3">Distribution</th>
<th class="px-4 py-3 text-center">Trend</th>
<th class="px-4 py-3 text-center">Signal</th>
</tr>
</thead>
<tbody class="<%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold">NVDA</div><span class="font-medium">NVIDIA</span></div></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 font-bold">BULLISH</span></td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">86</td>
<td class="px-4 py-3 text-center">48</td>
<td class="px-4 py-3"><div class="flex gap-0.5"><div class="h-3 bg-emerald-500 rounded-l" style="width:72%"></div><div class="h-3 bg-amber-500" style="width:20%"></div><div class="h-3 bg-red-500 rounded-r" style="width:8%"></div></div></td>
<td class="px-4 py-3 text-center text-emerald-400">â†‘</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500 text-white text-xs">BUY</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">AAPL</div><span class="font-medium">Apple</span></div></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 font-bold">BULLISH</span></td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">74</td>
<td class="px-4 py-3 text-center">62</td>
<td class="px-4 py-3"><div class="flex gap-0.5"><div class="h-3 bg-emerald-500 rounded-l" style="width:58%"></div><div class="h-3 bg-amber-500" style="width:32%"></div><div class="h-3 bg-red-500 rounded-r" style="width:10%"></div></div></td>
<td class="px-4 py-3 text-center">â†’</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">HOLD</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white text-xs font-bold">TSLA</div><span class="font-medium">Tesla</span></div></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-amber-500/20 text-amber-400 font-bold">MIXED</span></td>
<td class="px-4 py-3 text-center font-bold text-amber-400">52</td>
<td class="px-4 py-3 text-center">84</td>
<td class="px-4 py-3"><div class="flex gap-0.5"><div class="h-3 bg-emerald-500 rounded-l" style="width:38%"></div><div class="h-3 bg-amber-500" style="width:32%"></div><div class="h-3 bg-red-500 rounded-r" style="width:30%"></div></div></td>
<td class="px-4 py-3 text-center text-red-400">â†“</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-amber-500/20 text-amber-400 text-xs">CAUTION</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">MSFT</div><span class="font-medium">Microsoft</span></div></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 font-bold">BULLISH</span></td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">78</td>
<td class="px-4 py-3 text-center">42</td>
<td class="px-4 py-3"><div class="flex gap-0.5"><div class="h-3 bg-emerald-500 rounded-l" style="width:64%"></div><div class="h-3 bg-amber-500" style="width:28%"></div><div class="h-3 bg-red-500 rounded-r" style="width:8%"></div></div></td>
<td class="px-4 py-3 text-center text-emerald-400">â†‘</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">HOLD</span></td>
</tr>
</tbody>
</table>
</div>

<!-- Recent News with Sentiment -->
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">ðŸ“° Recent News (Sentiment Scored)</h3>
<div class="space-y-3">
<div class="flex items-start gap-3 p-3 rounded-lg <%= theme === 'light' ? 'bg-emerald-50' : 'bg-emerald-500/10' %>">
<div class="px-2 py-1 rounded bg-emerald-500 text-white text-xs font-bold">+92</div>
<div class="flex-1">
<p class="font-medium">NVIDIA Announces Record Q3 Results, AI Demand Surges</p>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Reuters â€¢ 2 hours ago â€¢ NVDA</p>
</div>
</div>
<div class="flex items-start gap-3 p-3 rounded-lg <%= theme === 'light' ? 'bg-emerald-50' : 'bg-emerald-500/10' %>">
<div class="px-2 py-1 rounded bg-emerald-500 text-white text-xs font-bold">+78</div>
<div class="flex-1">
<p class="font-medium">Apple Vision Pro Sales Beat Expectations in Key Markets</p>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Bloomberg â€¢ 3 hours ago â€¢ AAPL</p>
</div>
</div>
<div class="flex items-start gap-3 p-3 rounded-lg <%= theme === 'light' ? 'bg-amber-50' : 'bg-amber-500/10' %>">
<div class="px-2 py-1 rounded bg-amber-500 text-white text-xs font-bold">+45</div>
<div class="flex-1">
<p class="font-medium">Tesla Faces Increased Competition in China EV Market</p>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">WSJ â€¢ 4 hours ago â€¢ TSLA</p>
</div>
</div>
<div class="flex items-start gap-3 p-3 rounded-lg <%= theme === 'light' ? 'bg-red-50' : 'bg-red-500/10' %>">
<div class="px-2 py-1 rounded bg-red-500 text-white text-xs font-bold">-24</div>
<div class="flex-1">
<p class="font-medium">Analysts Lower Tesla Price Targets Amid Margin Pressure</p>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">CNBC â€¢ 5 hours ago â€¢ TSLA</p>
</div>
</div>
<div class="flex items-start gap-3 p-3 rounded-lg <%= theme === 'light' ? 'bg-emerald-50' : 'bg-emerald-500/10' %>">
<div class="px-2 py-1 rounded bg-emerald-500 text-white text-xs font-bold">+82</div>
<div class="flex-1">
<p class="font-medium">Microsoft Azure Growth Accelerates, Cloud Dominance Continues</p>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">FT â€¢ 6 hours ago â€¢ MSFT</p>
</div>
</div>
</div>
</div>

<!-- Charts -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Sentiment Trend (7 Days)</h3>
<div class="h-48"><canvas id="trendChart"></canvas></div>
</div>
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">News by Source</h3>
<div class="h-48"><canvas id="sourceChart"></canvas></div>
</div>
</div>
</div></div></main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
new Chart(document.getElementById('trendChart'), {
  type: 'line',
  data: { labels: ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'], datasets: [
    { label: 'Portfolio', data: [68,72,70,74,72,71,72], borderColor: '#0ea5e9', fill: false },
    { label: 'Market', data: [62,64,63,65,64,63,64], borderColor: '#94a3b8', borderDash: [5,5], fill: false }
  ]},
  options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 50, max: 90 } } }
});
new Chart(document.getElementById('sourceChart'), {
  type: 'doughnut',
  data: { labels: ['Reuters','Bloomberg','CNBC','WSJ','FT','Other'], datasets: [{ data: [28,24,18,14,10,6], backgroundColor: ['#ef4444','#f59e0b','#10b981','#0ea5e9','#8b5cf6','#94a3b8'] }] },
  options: { responsive: true, maintainAspectRatio: false }
});
</script>
<%- include('../partials/footer') %>
