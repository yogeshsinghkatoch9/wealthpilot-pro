<%- include('../partials/header', { pageTitle: 'Peer Rankings' }) %>

<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
<div><h1 class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Peer Rankings</h1><p class="<%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Rank holdings vs sector peers across metrics</p></div>
<div class="flex gap-2">
<select class="form-input w-36"><option selected>Technology</option><option>Healthcare</option><option>Financials</option><option>Consumer</option></select>
</div>
</div>

<!-- Rankings Summary -->
<div class="card p-5 bg-gradient-to-r <%= theme === 'light' ? 'from-amber-50 to-purple-50' : 'from-amber-900/20 to-purple-900/20' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Technology Sector Rankings (of 48 peers)</h3>
<div class="grid grid-cols-2 md:grid-cols-5 gap-4">
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Your Holdings</p>
<p class="text-3xl font-bold text-purple-400">6</p>
<p class="text-xs">in sector</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Top Quartile</p>
<p class="text-3xl font-bold text-emerald-400">4</p>
<p class="text-xs text-emerald-400">rank 1-12</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">2nd Quartile</p>
<p class="text-3xl font-bold text-sky-400">1</p>
<p class="text-xs">rank 13-24</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Bottom Half</p>
<p class="text-3xl font-bold text-amber-400">1</p>
<p class="text-xs">rank 25+</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Best Overall</p>
<p class="text-3xl font-bold text-emerald-400">NVDA</p>
<p class="text-xs">avg rank #2</p>
</div>
</div>
</div>

<!-- Overall Rankings Table -->
<div class="card overflow-hidden">
<div class="p-4 border-b <%= theme === 'light' ? 'border-gray-200' : 'border-slate-700' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">üèÜ Holdings Composite Rankings</h3>
</div>
<table class="w-full text-sm">
<thead>
<tr class="<%= theme === 'light' ? 'bg-gray-50 text-gray-500' : 'bg-slate-800 text-slate-400' %> text-left">
<th class="px-4 py-3">Stock</th>
<th class="px-4 py-3 text-center">Growth</th>
<th class="px-4 py-3 text-center">Profitability</th>
<th class="px-4 py-3 text-center">Valuation</th>
<th class="px-4 py-3 text-center">Momentum</th>
<th class="px-4 py-3 text-center">Quality</th>
<th class="px-4 py-3 text-center">Avg Rank</th>
<th class="px-4 py-3 text-center">Percentile</th>
</tr>
</thead>
<tbody class="<%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">
<tr class="border-b <%= theme === 'light' ? 'border-gray-100 bg-amber-50/30' : 'border-slate-700/50 bg-amber-500/5' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-amber-400 font-bold">#1</span><div class="w-8 h-8 rounded bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold">NVDA</div><span class="font-medium">NVIDIA</span></div></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs font-bold">#1</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs font-bold">#1</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-amber-500/20 text-amber-400 text-xs">#28</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs font-bold">#1</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs font-bold">#2</span></td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">#6.6</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500 text-white text-xs">98th</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-slate-400 font-bold">#2</span><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">META</div><span class="font-medium">Meta</span></div></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#4</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#3</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#8</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#3</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#5</span></td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">#4.6</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500 text-white text-xs">96th</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-amber-600 font-bold">#3</span><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">MSFT</div><span class="font-medium">Microsoft</span></div></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#6</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#4</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-sky-500/20 text-sky-400 text-xs">#18</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#8</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs font-bold">#1</span></td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">#7.4</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500 text-white text-xs">92nd</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-slate-400 font-bold">#4</span><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">AAPL</div><span class="font-medium">Apple</span></div></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-sky-500/20 text-sky-400 text-xs">#14</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#5</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-amber-500/20 text-amber-400 text-xs">#32</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#12</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#3</span></td>
<td class="px-4 py-3 text-center font-bold">#13.2</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-sky-500 text-white text-xs">78th</span></td>
</tr>
<tr>
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-slate-400 font-bold">#6</span><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">INTC</div><span class="font-medium">Intel</span></div></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-red-500/20 text-red-400 text-xs">#42</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-red-500/20 text-red-400 text-xs">#38</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">#4</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-red-500/20 text-red-400 text-xs">#44</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-amber-500/20 text-amber-400 text-xs">#28</span></td>
<td class="px-4 py-3 text-center font-bold text-amber-400">#31.2</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-amber-500 text-white text-xs">35th</span></td>
</tr>
</tbody>
</table>
</div>

<!-- Category Leaders -->
<div class="grid grid-cols-1 md:grid-cols-5 gap-4">
<div class="card p-4 text-center">
<h4 class="font-bold text-emerald-400 mb-2">üìà Growth Leader</h4>
<p class="text-2xl font-bold">NVDA</p>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Revenue +122% YoY</p>
</div>
<div class="card p-4 text-center">
<h4 class="font-bold text-sky-400 mb-2">üí∞ Profitability</h4>
<p class="text-2xl font-bold">NVDA</p>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">62% Op Margin</p>
</div>
<div class="card p-4 text-center">
<h4 class="font-bold text-purple-400 mb-2">üìä Value Play</h4>
<p class="text-2xl font-bold">INTC</p>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">12x P/E</p>
</div>
<div class="card p-4 text-center">
<h4 class="font-bold text-amber-400 mb-2">üöÄ Momentum</h4>
<p class="text-2xl font-bold">NVDA</p>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">+124% 6M return</p>
</div>
<div class="card p-4 text-center">
<h4 class="font-bold text-red-400 mb-2">‚≠ê Quality</h4>
<p class="text-2xl font-bold">MSFT</p>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">AAA rated</p>
</div>
</div>

<!-- Charts -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Percentile Rankings</h3>
<div class="h-48"><canvas id="percentileChart"></canvas></div>
</div>
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Rank by Category (NVDA)</h3>
<div class="h-48"><canvas id="radarChart"></canvas></div>
</div>
</div>
</div></div></main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
new Chart(document.getElementById('percentileChart'), {
  type: 'bar',
  data: { labels: ['NVDA','META','MSFT','GOOGL','AAPL','INTC'], datasets: [{ label: 'Percentile', data: [98,96,92,88,78,35], backgroundColor: d => d.raw > 75 ? '#10b981' : d.raw > 50 ? '#0ea5e9' : '#f59e0b' }] },
  options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { max: 100 } } }
});
new Chart(document.getElementById('radarChart'), {
  type: 'radar',
  data: { labels: ['Growth','Profitability','Valuation','Momentum','Quality'], datasets: [
    { label: 'NVDA', data: [48,48,20,48,46], borderColor: '#8b5cf6', backgroundColor: 'rgba(139,92,246,0.2)' },
    { label: 'Median', data: [24,24,24,24,24], borderColor: '#94a3b8', borderDash: [5,5], backgroundColor: 'transparent' }
  ]},
  options: { responsive: true, maintainAspectRatio: false, scales: { r: { min: 0, max: 48 } } }
});
</script>
<%- include('../partials/footer') %>
