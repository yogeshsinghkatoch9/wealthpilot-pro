<%- include('../partials/header', { pageTitle: 'Revenue Per Employee' }) %>

<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
<div><h1 class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Revenue Per Employee</h1><p class="<%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Productivity & efficiency metrics</p></div>
<div class="flex gap-2">
<select class="form-input w-36"><option selected>My Holdings</option><option>Technology</option><option>All Sectors</option></select>
</div>
</div>

<!-- Efficiency Summary -->
<div class="card p-5 bg-gradient-to-r <%= theme === 'light' ? 'from-sky-50 to-purple-50' : 'from-sky-900/20 to-purple-900/20' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Portfolio Efficiency Metrics</h3>
<div class="grid grid-cols-2 md:grid-cols-5 gap-4">
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Avg Rev/Employee</p>
<p class="text-2xl font-bold text-purple-400">$842K</p>
<p class="text-xs">weighted avg</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Avg Profit/Employee</p>
<p class="text-2xl font-bold text-emerald-400">$284K</p>
<p class="text-xs">net income</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Most Efficient</p>
<p class="text-2xl font-bold text-sky-400">NVDA</p>
<p class="text-xs">$2.84M/emp</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Sector Avg</p>
<p class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">$624K</p>
<p class="text-xs">Tech sector</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Above Avg</p>
<p class="text-2xl font-bold text-emerald-400">8/12</p>
<p class="text-xs text-emerald-400">holdings</p>
</div>
</div>
</div>

<!-- Holdings Efficiency Table -->
<div class="card overflow-hidden">
<div class="p-4 border-b <%= theme === 'light' ? 'border-gray-200' : 'border-slate-700' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Holdings Efficiency Rankings</h3>
</div>
<table class="w-full text-sm">
<thead>
<tr class="<%= theme === 'light' ? 'bg-gray-50 text-gray-500' : 'bg-slate-800 text-slate-400' %> text-left">
<th class="px-4 py-3">Company</th>
<th class="px-4 py-3 text-center">Revenue</th>
<th class="px-4 py-3 text-center">Employees</th>
<th class="px-4 py-3 text-center">Rev/Employee</th>
<th class="px-4 py-3 text-center">Profit/Employee</th>
<th class="px-4 py-3 text-center">YoY Change</th>
<th class="px-4 py-3 text-center">vs Sector</th>
</tr>
</thead>
<tbody class="<%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">
<tr class="border-b <%= theme === 'light' ? 'border-gray-100 bg-amber-50/30' : 'border-slate-700/50 bg-amber-500/5' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-amber-400 font-bold">#1</span><div class="w-8 h-8 rounded bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold">NVDA</div><span class="font-medium">NVIDIA</span></div></td>
<td class="px-4 py-3 text-center">$79.8B</td>
<td class="px-4 py-3 text-center">28,106</td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">$2.84M</td>
<td class="px-4 py-3 text-center text-emerald-400">$1.52M</td>
<td class="px-4 py-3 text-center text-emerald-400">+124.8%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">+355%</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-slate-400 font-bold">#2</span><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">META</div><span class="font-medium">Meta</span></div></td>
<td class="px-4 py-3 text-center">$134.9B</td>
<td class="px-4 py-3 text-center">67,317</td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">$2.00M</td>
<td class="px-4 py-3 text-center text-emerald-400">$584K</td>
<td class="px-4 py-3 text-center text-emerald-400">+28.4%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">+221%</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-amber-600 font-bold">#3</span><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">AAPL</div><span class="font-medium">Apple</span></div></td>
<td class="px-4 py-3 text-center">$383.3B</td>
<td class="px-4 py-3 text-center">164,000</td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">$2.34M</td>
<td class="px-4 py-3 text-center text-emerald-400">$584K</td>
<td class="px-4 py-3 text-center text-red-400">-2.4%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">+275%</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-slate-400 font-bold">#4</span><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">GOOGL</div><span class="font-medium">Alphabet</span></div></td>
<td class="px-4 py-3 text-center">$307.4B</td>
<td class="px-4 py-3 text-center">182,502</td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">$1.68M</td>
<td class="px-4 py-3 text-center text-emerald-400">$412K</td>
<td class="px-4 py-3 text-center text-emerald-400">+8.4%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">+169%</span></td>
</tr>
<tr>
<td class="px-4 py-3"><div class="flex items-center gap-2"><span class="text-slate-400 font-bold">#8</span><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">INTC</div><span class="font-medium">Intel</span></div></td>
<td class="px-4 py-3 text-center">$54.2B</td>
<td class="px-4 py-3 text-center">124,800</td>
<td class="px-4 py-3 text-center font-bold text-amber-400">$434K</td>
<td class="px-4 py-3 text-center text-red-400">-$42K</td>
<td class="px-4 py-3 text-center text-red-400">-28.4%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-red-500/20 text-red-400 text-xs">-30%</span></td>
</tr>
</tbody>
</table>
</div>

<!-- Efficiency Insights -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<div class="card p-5">
<h4 class="font-bold text-emerald-400 mb-3">üèÜ Efficiency Leaders</h4>
<div class="space-y-2">
<div class="flex justify-between"><span>NVDA</span><span class="font-bold text-emerald-400">$2.84M</span></div>
<div class="flex justify-between"><span>AAPL</span><span class="font-bold text-emerald-400">$2.34M</span></div>
<div class="flex justify-between"><span>META</span><span class="font-bold text-emerald-400">$2.00M</span></div>
</div>
</div>
<div class="card p-5">
<h4 class="font-bold text-sky-400 mb-3">üìà Most Improved</h4>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> mb-3">YoY efficiency gains</p>
<div class="space-y-2">
<div class="flex justify-between"><span>NVDA</span><span class="font-bold text-emerald-400">+124.8%</span></div>
<div class="flex justify-between"><span>META</span><span class="font-bold text-emerald-400">+28.4%</span></div>
<div class="flex justify-between"><span>GOOGL</span><span class="font-bold text-emerald-400">+8.4%</span></div>
</div>
</div>
<div class="card p-5">
<h4 class="font-bold text-red-400 mb-3">‚ö†Ô∏è Below Sector Avg</h4>
<div class="space-y-2">
<div class="flex justify-between"><span>INTC</span><span class="font-bold text-red-400">$434K</span></div>
<div class="flex justify-between"><span>IBM</span><span class="font-bold text-red-400">$482K</span></div>
<div class="flex justify-between"><span>HPE</span><span class="font-bold text-red-400">$384K</span></div>
</div>
</div>
</div>

<!-- Charts -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Revenue Per Employee Comparison</h3>
<div class="h-48"><canvas id="efficiencyChart"></canvas></div>
</div>
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">NVDA Efficiency Trend (5Y)</h3>
<div class="h-48"><canvas id="trendChart"></canvas></div>
</div>
</div>
</div></div></main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
new Chart(document.getElementById('efficiencyChart'), {
  type: 'bar',
  data: { labels: ['NVDA','AAPL','META','GOOGL','MSFT','AMZN','INTC'], datasets: [
    { label: 'Rev/Employee ($M)', data: [2.84,2.34,2.00,1.68,0.92,0.38,0.43], backgroundColor: d => d.raw > 0.624 ? '#10b981' : '#f59e0b' }
  ]},
  options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
});
new Chart(document.getElementById('trendChart'), {
  type: 'line',
  data: { labels: ['2020','2021','2022','2023','2024'], datasets: [
    { label: 'Rev/Emp ($M)', data: [0.58,0.84,1.12,1.26,2.84], borderColor: '#8b5cf6', fill: true, backgroundColor: 'rgba(139,92,246,0.1)' }
  ]},
  options: { responsive: true, maintainAspectRatio: false }
});
</script>
<%- include('../partials/footer') %>
