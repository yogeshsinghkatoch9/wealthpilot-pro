<%- include('../partials/header', { pageTitle: 'Dividend Yield Curve' }) %>

<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
<div><h1 class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Dividend Yield Curve</h1><p class="<%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Historical yield trends & fair value analysis</p></div>
<div class="flex gap-2">
<select class="form-input w-36"><option selected>My Holdings</option><option>Dividend Stocks</option></select>
<select class="form-input w-28"><option>3 Years</option><option selected>5 Years</option><option>10 Years</option></select>
</div>
</div>

<!-- Yield Summary -->
<div class="card p-5 bg-gradient-to-r <%= theme === 'light' ? 'from-emerald-50 to-sky-50' : 'from-emerald-900/20 to-sky-900/20' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Portfolio Yield Analysis</h3>
<div class="grid grid-cols-2 md:grid-cols-5 gap-4">
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Current Yield</p>
<p class="text-3xl font-bold text-emerald-400">2.42%</p>
<p class="text-xs">weighted avg</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">5Y Avg Yield</p>
<p class="text-3xl font-bold text-sky-400">2.18%</p>
<p class="text-xs">historical</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">vs 5Y Avg</p>
<p class="text-3xl font-bold text-emerald-400">+11%</p>
<p class="text-xs text-emerald-400">above avg</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Undervalued</p>
<p class="text-3xl font-bold text-emerald-400">6</p>
<p class="text-xs">yield > avg</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Overvalued</p>
<p class="text-3xl font-bold text-green-400">4</p>
<p class="text-xs">yield < avg</p>
</div>
</div>
</div>

<!-- Holdings Yield Analysis -->
<div class="card overflow-hidden">
<div class="p-4 border-b <%= theme === 'light' ? 'border-gray-200' : 'border-slate-700' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Holdings Yield Valuation</h3>
</div>
<table class="w-full text-sm">
<thead>
<tr class="<%= theme === 'light' ? 'bg-gray-50 text-gray-500' : 'bg-slate-800 text-slate-400' %> text-left">
<th class="px-4 py-3">Stock</th>
<th class="px-4 py-3 text-center">Current Yield</th>
<th class="px-4 py-3 text-center">5Y Avg</th>
<th class="px-4 py-3 text-center">5Y High</th>
<th class="px-4 py-3 text-center">5Y Low</th>
<th class="px-4 py-3 text-center">vs Avg</th>
<th class="px-4 py-3 text-center">Valuation</th>
</tr>
</thead>
<tbody class="<%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">
<tr class="border-b <%= theme === 'light' ? 'border-gray-100 bg-emerald-50/50' : 'border-slate-700/50 bg-emerald-500/5' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white text-xs font-bold">VZ</div><span class="font-medium">Verizon</span></div></td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">6.82%</td>
<td class="px-4 py-3 text-center">4.84%</td>
<td class="px-4 py-3 text-center">7.42%</td>
<td class="px-4 py-3 text-center">3.82%</td>
<td class="px-4 py-3 text-center text-emerald-400 font-bold">+40.9%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">Undervalued</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100 bg-emerald-50/50' : 'border-slate-700/50 bg-emerald-500/5' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white text-xs font-bold">T</div><span class="font-medium">AT&T</span></div></td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">5.48%</td>
<td class="px-4 py-3 text-center">4.92%</td>
<td class="px-4 py-3 text-center">7.84%</td>
<td class="px-4 py-3 text-center">4.12%</td>
<td class="px-4 py-3 text-center text-emerald-400 font-bold">+11.4%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 text-xs">Undervalued</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center text-white text-xs font-bold">JNJ</div><span class="font-medium">J&J</span></div></td>
<td class="px-4 py-3 text-center font-bold">2.94%</td>
<td class="px-4 py-3 text-center">2.68%</td>
<td class="px-4 py-3 text-center">3.42%</td>
<td class="px-4 py-3 text-center">2.24%</td>
<td class="px-4 py-3 text-center text-emerald-400">+9.7%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-sky-500/20 text-sky-400 text-xs">Fair Value</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100 bg-green-50/50' : 'border-slate-700/50 bg-green-500/5' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">AAPL</div><span class="font-medium">Apple</span></div></td>
<td class="px-4 py-3 text-center font-bold text-green-400">0.51%</td>
<td class="px-4 py-3 text-center">0.72%</td>
<td class="px-4 py-3 text-center">1.12%</td>
<td class="px-4 py-3 text-center">0.48%</td>
<td class="px-4 py-3 text-center text-red-400 font-bold">-29.2%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-green-500/20 text-green-400 text-xs">Overvalued</span></td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100 bg-green-50/50' : 'border-slate-700/50 bg-green-500/5' %>">
<td class="px-4 py-3"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">MSFT</div><span class="font-medium">Microsoft</span></div></td>
<td class="px-4 py-3 text-center font-bold text-green-400">0.70%</td>
<td class="px-4 py-3 text-center">0.94%</td>
<td class="px-4 py-3 text-center">1.24%</td>
<td class="px-4 py-3 text-center">0.68%</td>
<td class="px-4 py-3 text-center text-red-400 font-bold">-25.5%</td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-green-500/20 text-green-400 text-xs">Overvalued</span></td>
</tr>
</tbody>
</table>
</div>

<!-- Yield Insights -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<div class="card p-5">
<h4 class="font-bold text-emerald-400 mb-3">üéØ Best Value (Yield > Avg)</h4>
<div class="space-y-2">
<div class="flex justify-between"><span>VZ</span><span class="font-bold text-emerald-400">+40.9%</span></div>
<div class="flex justify-between"><span>INTC</span><span class="font-bold text-emerald-400">+28.4%</span></div>
<div class="flex justify-between"><span>T</span><span class="font-bold text-emerald-400">+11.4%</span></div>
</div>
</div>
<div class="card p-5">
<h4 class="font-bold text-green-400 mb-3">‚ö†Ô∏è Stretched (Yield < Avg)</h4>
<div class="space-y-2">
<div class="flex justify-between"><span>AAPL</span><span class="font-bold text-red-400">-29.2%</span></div>
<div class="flex justify-between"><span>MSFT</span><span class="font-bold text-red-400">-25.5%</span></div>
<div class="flex justify-between"><span>COST</span><span class="font-bold text-red-400">-18.4%</span></div>
</div>
</div>
<div class="card p-5">
<h4 class="font-bold text-sky-400 mb-3">üìä Fair Value Zone</h4>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> mb-3">Within ¬±10% of 5Y avg</p>
<div class="space-y-2">
<div class="flex justify-between"><span>JNJ</span><span class="font-bold">+9.7%</span></div>
<div class="flex justify-between"><span>PG</span><span class="font-bold">+4.2%</span></div>
<div class="flex justify-between"><span>KO</span><span class="font-bold">-2.8%</span></div>
</div>
</div>
</div>

<!-- Yield Charts -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">JNJ Yield History (5Y)</h3>
<div class="h-48"><canvas id="yieldChart"></canvas></div>
</div>
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Current vs 5Y Avg Yield</h3>
<div class="h-48"><canvas id="compChart"></canvas></div>
</div>
</div>
</div></div></main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
new Chart(document.getElementById('yieldChart'), {
  type: 'line',
  data: { labels: ['2020','2021','2022','2023','2024'], datasets: [
    { label: 'Yield', data: [2.68,2.52,2.84,2.92,2.94], borderColor: '#10b981', fill: true, backgroundColor: 'rgba(16,185,129,0.1)' },
    { label: '5Y Avg', data: [2.68,2.68,2.68,2.68,2.68], borderColor: '#f59e0b', borderDash: [5,5], fill: false }
  ]},
  options: { responsive: true, maintainAspectRatio: false }
});
new Chart(document.getElementById('compChart'), {
  type: 'bar',
  data: { labels: ['VZ','T','JNJ','PG','AAPL','MSFT'], datasets: [
    { label: 'Current', data: [6.82,5.48,2.94,2.48,0.51,0.70], backgroundColor: '#0ea5e9' },
    { label: '5Y Avg', data: [4.84,4.92,2.68,2.38,0.72,0.94], backgroundColor: '#94a3b8' }
  ]},
  options: { responsive: true, maintainAspectRatio: false }
});
</script>
<%- include('../partials/footer') %>
