<%- include('../partials/header', { pageTitle: 'Income Projections' }) %>

<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
<div><h1 class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Income Projections</h1><p class="<%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Forecast your dividend & interest income</p></div>
<select class="form-input w-40">
<option>Next 12 Months</option>
<option>Next 5 Years</option>
<option>To Retirement</option>
</select>
</div>

<!-- Summary Cards -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-4">
<div class="card p-4">
<p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm">Projected Annual</p>
<p class="text-2xl font-bold text-emerald-400">$12,847</p>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Next 12 months</p>
</div>
<div class="card p-4">
<p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm">Monthly Average</p>
<p class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">$1,071</p>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Passive income</p>
</div>
<div class="card p-4">
<p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm">Dividend Yield</p>
<p class="text-2xl font-bold text-sky-400">4.64%</p>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Portfolio avg</p>
</div>
<div class="card p-4">
<p class="<%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> text-sm">YoY Growth</p>
<p class="text-2xl font-bold text-emerald-400">+18.2%</p>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">vs last year</p>
</div>
</div>

<!-- Monthly Projection Chart -->
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Monthly Income Forecast</h3>
<div class="h-72"><canvas id="incomeChart"></canvas></div>
<div class="flex justify-center gap-6 mt-4">
<span class="flex items-center gap-2 text-sm"><span class="w-3 h-3 rounded-full bg-emerald-500"></span>Dividends</span>
<span class="flex items-center gap-2 text-sm"><span class="w-3 h-3 rounded-full bg-sky-500"></span>Bond Interest</span>
<span class="flex items-center gap-2 text-sm"><span class="w-3 h-3 rounded-full bg-purple-500"></span>Option Premium</span>
</div>
</div>

<!-- Upcoming Payments -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">ðŸ“… Upcoming Payments (30 days)</h3>
<div class="space-y-3">
<div class="flex items-center justify-between p-3 rounded-lg <%= theme === 'light' ? 'bg-emerald-50' : 'bg-emerald-500/10' %>">
<div class="flex items-center gap-3">
<div class="w-10 h-10 rounded bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold">O</div>
<div><p class="font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Realty Income</p><p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Dec 15 â€¢ Monthly</p></div>
</div>
<p class="text-lg font-bold text-emerald-400">$25.75</p>
</div>
<div class="flex items-center justify-between p-3 rounded-lg <%= theme === 'light' ? 'bg-emerald-50' : 'bg-emerald-500/10' %>">
<div class="flex items-center gap-3">
<div class="w-10 h-10 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">AAPL</div>
<div><p class="font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Apple</p><p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Dec 15 â€¢ Quarterly</p></div>
</div>
<p class="text-lg font-bold text-emerald-400">$12.00</p>
</div>
<div class="flex items-center justify-between p-3 rounded-lg <%= theme === 'light' ? 'bg-sky-50' : 'bg-sky-500/10' %>">
<div class="flex items-center gap-3">
<div class="w-10 h-10 rounded bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-xs font-bold">UST</div>
<div><p class="font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">US Treasury 10Y</p><p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Dec 31 â€¢ Semi-Annual</p></div>
</div>
<p class="text-lg font-bold text-sky-400">$1,125</p>
</div>
<div class="flex items-center justify-between p-3 rounded-lg <%= theme === 'light' ? 'bg-emerald-50' : 'bg-emerald-500/10' %>">
<div class="flex items-center gap-3">
<div class="w-10 h-10 rounded bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center text-white text-xs font-bold">JNJ</div>
<div><p class="font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">Johnson & Johnson</p><p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Jan 3 â€¢ Quarterly</p></div>
</div>
<p class="text-lg font-bold text-emerald-400">$30.00</p>
</div>
</div>
</div>
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">ðŸ“Š Income by Source</h3>
<div class="h-48"><canvas id="sourceChart"></canvas></div>
<div class="grid grid-cols-3 gap-4 mt-4 text-center">
<div><p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Dividends</p><p class="font-bold text-emerald-400">$6,240</p><p class="text-xs">48.6%</p></div>
<div><p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Bond Interest</p><p class="font-bold text-sky-400">$6,022</p><p class="text-xs">46.9%</p></div>
<div><p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Options</p><p class="font-bold text-purple-400">$585</p><p class="text-xs">4.5%</p></div>
</div>
</div>
</div>

<!-- 5 Year Projection -->
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">5-Year Income Projection</h3>
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> mb-4">Assumes 7% dividend growth, DRIP enabled, no additional contributions</p>
<div class="grid grid-cols-5 gap-4">
<div class="text-center p-4 rounded-lg <%= theme === 'light' ? 'bg-gray-50' : 'bg-slate-800' %>">
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">2025</p>
<p class="text-2xl font-bold text-emerald-400">$12,847</p>
<p class="text-xs text-emerald-400">Current</p>
</div>
<div class="text-center p-4 rounded-lg <%= theme === 'light' ? 'bg-gray-50' : 'bg-slate-800' %>">
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">2026</p>
<p class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">$14,820</p>
<p class="text-xs text-emerald-400">+15.4%</p>
</div>
<div class="text-center p-4 rounded-lg <%= theme === 'light' ? 'bg-gray-50' : 'bg-slate-800' %>">
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">2027</p>
<p class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">$17,106</p>
<p class="text-xs text-emerald-400">+15.4%</p>
</div>
<div class="text-center p-4 rounded-lg <%= theme === 'light' ? 'bg-gray-50' : 'bg-slate-800' %>">
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">2028</p>
<p class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">$19,745</p>
<p class="text-xs text-emerald-400">+15.4%</p>
</div>
<div class="text-center p-4 rounded-lg <%= theme === 'light' ? 'bg-emerald-50 border-2 border-emerald-500' : 'bg-emerald-500/20 border-2 border-emerald-500' %>">
<p class="text-sm <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">2029</p>
<p class="text-2xl font-bold text-emerald-400">$22,790</p>
<p class="text-xs text-emerald-400">+77% total</p>
</div>
</div>
</div>

<!-- Income Calendar -->
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Monthly Income Calendar</h3>
<div class="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-12 gap-2">
<% const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']; %>
<% const amounts = [842,1240,1580,920,1340,1420,880,1180,1640,960,1420,1425]; %>
<% months.forEach((m, i) => { %>
<div class="text-center p-3 rounded-lg <%= theme === 'light' ? 'bg-gray-50' : 'bg-slate-800' %>">
<p class="text-xs font-medium <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>"><%= m %></p>
<p class="text-sm font-bold <%= amounts[i] > 1200 ? 'text-emerald-400' : (theme === 'light' ? 'text-gray-900' : 'text-white') %>">$<%= amounts[i] %></p>
</div>
<% }); %>
</div>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %> mt-3 text-center">ðŸ’¡ March, September, December are peak dividend months (quarterly payouts cluster)</p>
</div>
</div></div></main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
new Chart(document.getElementById('incomeChart'), {
  type: 'bar',
  data: {
    labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
    datasets: [
      { label: 'Dividends', data: [420,620,980,480,720,820,440,580,1040,520,820,800], backgroundColor: '#10b981' },
      { label: 'Interest', data: [380,580,560,400,580,560,400,560,560,400,560,585], backgroundColor: '#0ea5e9' },
      { label: 'Options', data: [42,40,40,40,40,40,40,40,40,40,40,40], backgroundColor: '#8b5cf6' }
    ]
  },
  options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { stacked: true }, y: { stacked: true } } }
});
new Chart(document.getElementById('sourceChart'), {
  type: 'doughnut',
  data: { labels: ['Dividends','Interest','Options'], datasets: [{ data: [48.6,46.9,4.5], backgroundColor: ['#10b981','#0ea5e9','#8b5cf6'] }] },
  options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
});
</script>
<%- include('../partials/footer') %>
