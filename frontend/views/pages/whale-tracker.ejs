<%- include('../partials/header', { pageTitle: 'Whale Tracker' }) %>

<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
<div><h1 class="text-2xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">üêã Whale Tracker</h1><p class="<%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Track large block trades & dark pool activity</p></div>
<div class="flex gap-2">
<select class="form-input w-28"><option selected>Today</option><option>This Week</option><option>This Month</option></select>
<select class="form-input w-32"><option selected>All Holdings</option><option>Tech Only</option></select>
</div>
</div>

<!-- Whale Summary -->
<div class="card p-5 bg-gradient-to-r <%= theme === 'light' ? 'from-purple-50 to-sky-50' : 'from-purple-900/20 to-sky-900/20' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Today's Whale Activity</h3>
<div class="grid grid-cols-2 md:grid-cols-5 gap-4">
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Block Trades</p>
<p class="text-3xl font-bold text-purple-400">847</p>
<p class="text-xs">$10M+ trades</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Total Volume</p>
<p class="text-3xl font-bold text-sky-400">$42.8B</p>
<p class="text-xs">whale activity</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Net Buying</p>
<p class="text-3xl font-bold text-emerald-400">+$8.4B</p>
<p class="text-xs">bullish signal</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Dark Pool %</p>
<p class="text-3xl font-bold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">38.4%</p>
<p class="text-xs">of volume</p>
</div>
<div class="text-center">
<p class="text-sm <%= theme === 'light' ? 'text-gray-600' : 'text-slate-400' %>">Biggest Trade</p>
<p class="text-3xl font-bold text-amber-400">NVDA</p>
<p class="text-xs">$284M block</p>
</div>
</div>
</div>

<!-- Recent Large Trades -->
<div class="card overflow-hidden">
<div class="p-4 border-b <%= theme === 'light' ? 'border-gray-200' : 'border-slate-700' %>">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">üî• Recent Block Trades (>$10M)</h3>
</div>
<table class="w-full text-sm">
<thead>
<tr class="<%= theme === 'light' ? 'bg-gray-50 text-gray-500' : 'bg-slate-800 text-slate-400' %> text-left">
<th class="px-4 py-3">Time</th>
<th class="px-4 py-3">Stock</th>
<th class="px-4 py-3 text-center">Side</th>
<th class="px-4 py-3 text-center">Shares</th>
<th class="px-4 py-3 text-center">Price</th>
<th class="px-4 py-3 text-center">Value</th>
<th class="px-4 py-3 text-center">Venue</th>
<th class="px-4 py-3 text-center">vs VWAP</th>
</tr>
</thead>
<tbody class="<%= theme === 'light' ? 'text-gray-900' : 'text-white' %>">
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %> <%= theme === 'light' ? 'bg-emerald-50/50' : 'bg-emerald-500/5' %>">
<td class="px-4 py-3 font-mono text-xs">15:42:18</td>
<td class="px-4 py-3"><span class="font-bold text-purple-400">NVDA</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 font-bold">BUY</span></td>
<td class="px-4 py-3 text-center">1.98M</td>
<td class="px-4 py-3 text-center">$143.42</td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">$284.0M</td>
<td class="px-4 py-3 text-center"><span class="text-purple-400">Dark Pool</span></td>
<td class="px-4 py-3 text-center text-emerald-400">+0.4%</td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %> <%= theme === 'light' ? 'bg-emerald-50/50' : 'bg-emerald-500/5' %>">
<td class="px-4 py-3 font-mono text-xs">15:28:44</td>
<td class="px-4 py-3"><span class="font-bold text-sky-400">META</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 font-bold">BUY</span></td>
<td class="px-4 py-3 text-center">284K</td>
<td class="px-4 py-3 text-center">$586.24</td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">$166.5M</td>
<td class="px-4 py-3 text-center"><span class="text-sky-400">NYSE</span></td>
<td class="px-4 py-3 text-center text-emerald-400">+0.2%</td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %> <%= theme === 'light' ? 'bg-red-50/50' : 'bg-red-500/5' %>">
<td class="px-4 py-3 font-mono text-xs">14:52:11</td>
<td class="px-4 py-3"><span class="font-bold text-sky-400">AAPL</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-red-500/20 text-red-400 font-bold">SELL</span></td>
<td class="px-4 py-3 text-center">624K</td>
<td class="px-4 py-3 text-center">$189.28</td>
<td class="px-4 py-3 text-center font-bold text-red-400">$118.1M</td>
<td class="px-4 py-3 text-center"><span class="text-purple-400">Dark Pool</span></td>
<td class="px-4 py-3 text-center text-red-400">-0.3%</td>
</tr>
<tr class="border-b <%= theme === 'light' ? 'border-gray-100' : 'border-slate-700/50' %> <%= theme === 'light' ? 'bg-emerald-50/50' : 'bg-emerald-500/5' %>">
<td class="px-4 py-3 font-mono text-xs">14:18:32</td>
<td class="px-4 py-3"><span class="font-bold text-emerald-400">GOOGL</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-400 font-bold">BUY</span></td>
<td class="px-4 py-3 text-center">528K</td>
<td class="px-4 py-3 text-center">$174.86</td>
<td class="px-4 py-3 text-center font-bold text-emerald-400">$92.3M</td>
<td class="px-4 py-3 text-center"><span class="text-amber-400">NASDAQ</span></td>
<td class="px-4 py-3 text-center text-emerald-400">+0.1%</td>
</tr>
<tr>
<td class="px-4 py-3 font-mono text-xs">13:44:08</td>
<td class="px-4 py-3"><span class="font-bold text-amber-400">TSLA</span></td>
<td class="px-4 py-3 text-center"><span class="px-2 py-1 rounded bg-red-500/20 text-red-400 font-bold">SELL</span></td>
<td class="px-4 py-3 text-center">324K</td>
<td class="px-4 py-3 text-center">$248.92</td>
<td class="px-4 py-3 text-center font-bold text-red-400">$80.7M</td>
<td class="px-4 py-3 text-center"><span class="text-purple-400">Dark Pool</span></td>
<td class="px-4 py-3 text-center text-red-400">-0.6%</td>
</tr>
</tbody>
</table>
</div>

<!-- Dark Pool Activity -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">üìä Dark Pool Sentiment</h3>
<div class="space-y-3">
<div class="flex items-center justify-between">
<span class="font-bold">NVDA</span>
<div class="flex-1 mx-4 h-4 bg-slate-700 rounded-full overflow-hidden">
<div class="h-full bg-gradient-to-r from-emerald-500 to-emerald-400" style="width:72%"></div>
</div>
<span class="text-emerald-400 font-bold">72% Buy</span>
</div>
<div class="flex items-center justify-between">
<span class="font-bold">META</span>
<div class="flex-1 mx-4 h-4 bg-slate-700 rounded-full overflow-hidden">
<div class="h-full bg-gradient-to-r from-emerald-500 to-emerald-400" style="width:68%"></div>
</div>
<span class="text-emerald-400 font-bold">68% Buy</span>
</div>
<div class="flex items-center justify-between">
<span class="font-bold">AAPL</span>
<div class="flex-1 mx-4 h-4 bg-slate-700 rounded-full overflow-hidden">
<div class="h-full bg-gradient-to-r from-red-500 to-red-400" style="width:58%"></div>
</div>
<span class="text-red-400 font-bold">42% Buy</span>
</div>
<div class="flex items-center justify-between">
<span class="font-bold">TSLA</span>
<div class="flex-1 mx-4 h-4 bg-slate-700 rounded-full overflow-hidden">
<div class="h-full bg-gradient-to-r from-red-500 to-red-400" style="width:38%"></div>
</div>
<span class="text-red-400 font-bold">38% Buy</span>
</div>
</div>
</div>

<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">üéØ Unusual Activity Alerts</h3>
<div class="space-y-3">
<div class="p-3 rounded-lg border-l-4 border-emerald-500 <%= theme === 'light' ? 'bg-emerald-50' : 'bg-emerald-500/10' %>">
<div class="flex justify-between items-center">
<span class="font-bold">NVDA</span>
<span class="text-emerald-400 text-xs">üî• 3.4x avg volume</span>
</div>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Heavy accumulation in dark pools</p>
</div>
<div class="p-3 rounded-lg border-l-4 border-amber-500 <%= theme === 'light' ? 'bg-amber-50' : 'bg-amber-500/10' %>">
<div class="flex justify-between items-center">
<span class="font-bold">MSFT</span>
<span class="text-amber-400 text-xs">‚ö° Large prints</span>
</div>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Multiple $50M+ blocks at VWAP</p>
</div>
<div class="p-3 rounded-lg border-l-4 border-red-500 <%= theme === 'light' ? 'bg-red-50' : 'bg-red-500/10' %>">
<div class="flex justify-between items-center">
<span class="font-bold">AAPL</span>
<span class="text-red-400 text-xs">üìâ Distribution</span>
</div>
<p class="text-xs <%= theme === 'light' ? 'text-gray-500' : 'text-slate-400' %>">Institutional selling pressure</p>
</div>
</div>
</div>
</div>

<!-- Charts -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Block Trade Volume (Week)</h3>
<div class="h-48"><canvas id="volumeChart"></canvas></div>
</div>
<div class="card p-5">
<h3 class="font-semibold <%= theme === 'light' ? 'text-gray-900' : 'text-white' %> mb-4">Venue Distribution</h3>
<div class="h-48"><canvas id="venueChart"></canvas></div>
</div>
</div>
</div></div></main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
new Chart(document.getElementById('volumeChart'), {
  type: 'bar',
  data: { labels: ['Mon','Tue','Wed','Thu','Fri'], datasets: [
    { label: 'Buy Blocks ($B)', data: [18.4,22.6,19.8,24.2,25.4], backgroundColor: '#10b981' },
    { label: 'Sell Blocks ($B)', data: [-12.8,-14.2,-16.4,-15.8,-17.0], backgroundColor: '#ef4444' }
  ]},
  options: { responsive: true, maintainAspectRatio: false, scales: { x: { stacked: true }, y: { stacked: true } } }
});
new Chart(document.getElementById('venueChart'), {
  type: 'doughnut',
  data: { labels: ['Dark Pools','NYSE','NASDAQ','Other'], datasets: [{ data: [38.4,28.2,24.8,8.6], backgroundColor: ['#8b5cf6','#0ea5e9','#f59e0b','#64748b'] }] },
  options: { responsive: true, maintainAspectRatio: false }
});
</script>
<%- include('../partials/footer') %>
